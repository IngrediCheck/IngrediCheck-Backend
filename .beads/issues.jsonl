{"id":"IngrediCheck-Backend-0di","title":"Reduce Supabase database storage","description":"## Summary\n\nDatabase storage analysis revealed significant optimization opportunities:\n\n### Current State\n- **Total Database Size**: 2.3 GB (of 12 GB allocated disk)\n- **Plan Included**: 8 GB (currently 4 GB over, ~$0.50/month overage)\n- **Disk Usage**: 6.31 GB total (Database: 2.29 GB, WAL: 3.39 GB, System: 0.63 GB)\n\n### Key Finding\nThe inventory_cache table consumes **2.2 GB (96% of database storage)** with 4M+ rows, but is **completely unused**:\n- No references in Edge Functions or TypeScript code\n- No database functions use it\n- All data was bulk-imported on Oct 2, 2025 (14-minute window)\n- No updates in 2+ months\n- Appears to be a one-time Open Food Facts import that was never integrated\n\n### Expected Outcome\nRemoving inventory_cache would reduce database from ~2.3 GB to ~100 MB, eliminating overage costs.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T12:44:23.719089+05:30","updated_at":"2025-12-15T12:44:23.719089+05:30"}
{"id":"IngrediCheck-Backend-0di.1","title":"[HUMAN] Confirm inventory_cache deletion is safe","description":"Review and confirm the bulk-imported Open Food Facts data is not needed and can be safely deleted. This 4M+ row table was imported on Oct 2, 2025 and has never been used.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T12:44:47.942191+05:30","updated_at":"2025-12-15T12:44:47.942191+05:30","dependencies":[{"issue_id":"IngrediCheck-Backend-0di.1","depends_on_id":"IngrediCheck-Backend-0di","type":"parent-child","created_at":"2025-12-15T12:44:47.943163+05:30","created_by":"daemon"}]}
{"id":"IngrediCheck-Backend-0di.2","title":"[CLAUDE] Verify inventory_cache has no code references","description":"Final comprehensive search to confirm no application code uses this table. Search Edge Functions, TypeScript files, and database functions.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T12:45:34.029179+05:30","updated_at":"2025-12-15T12:45:34.029179+05:30","dependencies":[{"issue_id":"IngrediCheck-Backend-0di.2","depends_on_id":"IngrediCheck-Backend-0di","type":"parent-child","created_at":"2025-12-15T12:45:34.029813+05:30","created_by":"daemon"}]}
{"id":"IngrediCheck-Backend-0di.3","title":"[CLAUDE] Update schema files","description":"Remove inventory_cache table definition from schema files (supabase/schemas/).","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T12:45:34.073607+05:30","updated_at":"2025-12-15T12:45:34.073607+05:30","dependencies":[{"issue_id":"IngrediCheck-Backend-0di.3","depends_on_id":"IngrediCheck-Backend-0di","type":"parent-child","created_at":"2025-12-15T12:45:34.07525+05:30","created_by":"daemon"}]}
{"id":"IngrediCheck-Backend-0di.4","title":"[CLAUDE] Create migration using Supabase CLI","description":"Use Supabase CLI to generate migration to drop the inventory_cache table.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T12:45:34.112681+05:30","updated_at":"2025-12-15T12:45:34.112681+05:30","dependencies":[{"issue_id":"IngrediCheck-Backend-0di.4","depends_on_id":"IngrediCheck-Backend-0di","type":"parent-child","created_at":"2025-12-15T12:45:34.114534+05:30","created_by":"daemon"}]}
{"id":"IngrediCheck-Backend-0di.5","title":"[HUMAN] Apply migration to production","description":"Run supabase db push or deploy the migration to production database.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T12:45:34.151366+05:30","updated_at":"2025-12-15T12:45:34.151366+05:30","dependencies":[{"issue_id":"IngrediCheck-Backend-0di.5","depends_on_id":"IngrediCheck-Backend-0di","type":"parent-child","created_at":"2025-12-15T12:45:34.152961+05:30","created_by":"daemon"}]}
{"id":"IngrediCheck-Backend-0di.6","title":"[CLAUDE] Run VACUUM to reclaim space","description":"Execute VACUUM command after table deletion to reclaim disk space.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T12:45:34.190095+05:30","updated_at":"2025-12-15T12:45:34.190095+05:30","dependencies":[{"issue_id":"IngrediCheck-Backend-0di.6","depends_on_id":"IngrediCheck-Backend-0di","type":"parent-child","created_at":"2025-12-15T12:45:34.191865+05:30","created_by":"daemon"}]}
{"id":"IngrediCheck-Backend-0di.7","title":"[HUMAN] Trigger Supabase project upgrade","description":"In Supabase Dashboard, trigger project upgrade to right-size disk from 12 GB to 8 GB. Disks only shrink during project upgrades.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T12:45:34.22935+05:30","updated_at":"2025-12-15T12:45:34.22935+05:30","dependencies":[{"issue_id":"IngrediCheck-Backend-0di.7","depends_on_id":"IngrediCheck-Backend-0di","type":"parent-child","created_at":"2025-12-15T12:45:34.230839+05:30","created_by":"daemon"}]}
{"id":"IngrediCheck-Backend-0di.8","title":"[HUMAN] Verify disk reduction in Dashboard","description":"Confirm disk has been reduced to 8 GB after project upgrade in Supabase Dashboard under Project Settings \u003e Compute and Disk.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T12:45:34.269662+05:30","updated_at":"2025-12-15T12:45:34.269662+05:30","dependencies":[{"issue_id":"IngrediCheck-Backend-0di.8","depends_on_id":"IngrediCheck-Backend-0di","type":"parent-child","created_at":"2025-12-15T12:45:34.271242+05:30","created_by":"daemon"}]}
{"id":"IngrediCheck-Backend-0di.9","title":"[HUMAN] Review and adjust WAL settings","description":"## WAL Analysis\n\nCurrent WAL size: 3.4 GB (54% of total disk usage)\n\n### Current Settings\n- max_wal_size: 4 GB\n- min_wal_size: 1 GB  \n- wal_level: logical (required for Supabase Realtime)\n\n### Recommended Changes (Optional)\nIn Supabase Dashboard → Project Settings → Database → Postgres Config:\n\n1. Reduce `min_wal_size` from 1024 MB to 512 MB (or 256 MB)\n2. Optionally reduce `max_wal_size` from 4096 MB to 2048 MB\n\n### Expected Savings\n- Reducing min_wal_size to 512 MB could save ~500 MB\n- Combined with max_wal_size reduction: ~1-2 GB potential savings\n\n### Note\nThis is lower priority than removing inventory_cache. WAL will naturally settle after the table deletion and project upgrade.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T12:51:16.566559+05:30","updated_at":"2025-12-15T12:51:16.566559+05:30","dependencies":[{"issue_id":"IngrediCheck-Backend-0di.9","depends_on_id":"IngrediCheck-Backend-0di","type":"parent-child","created_at":"2025-12-15T12:51:16.567398+05:30","created_by":"daemon"}]}
{"id":"IngrediCheck-Backend-p3w","title":"Add pagination to get_check_history function","description":"Add limit and offset parameters to get_check_history function to support pagination. Currently returns all results which could cause performance issues as user history grows beyond 42 rows.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-11T15:43:18.513798+05:30","updated_at":"2025-12-11T15:43:18.513798+05:30","labels":["backend","database","performance"]}
